# copier.yml  (must on app root)
_min_copier_version: "9.1.0"
_answers_file: ".copier-answers.yml"   #answers store there

# questions
app_name:
  type: str
  help: "Application name"
  default: "go-pipeline-app"

module_path:
  type: str
  help: "Go module path (e.g., github.com/you/go-pipeline-app)"
  default: "github.com/Serajian/go-pipeline-app"

http_port:
  type: int
  help: "HTTP port for the app"
  default: 1010

use_postgres:
  type: bool
  help: "Include Postgres?"
  default: true

use_redis:
  type: bool
  help: "Include Redis?"
  default: false

use_kafka:
  type: bool
  help: "Include Kafka?"
  default: true

# copier.yml
# فایل‌هایی که همیشه کپی نشن (ثابت، بدون شرط)
_exclude:
  - copier.yml
  - .github/workflows/init.yml

# بعد از تولید، بسته به پاسخ‌ها، مسیرها را حذف کن
_tasks:
  - sh: |
      set -e
      {% if not use_kafka %}
      rm -rf infrastructure/message_queue
      rm -rf deployment/docker/kafka-exporter
      rm -rf deployment/docker/zookeeper
      rm -rf deployment/docker/kafka-service
      {% endif %}

      {% if not use_postgres %}
      rm -rf infrastructure/db
      rm -rf deployment/docker/postgres-service
      rm -rf deployment/docker/postgres-exporter
      rm -rf deployment/docker/adminer
      {% endif %}

      {% if not use_redis %}
      rm -rf infrastructure/cache/redis
      rm -rf deployment/docker/redis-service
      rm -rf deployment/docker/redis-exporter
      rm -rf deployment/docker/redis-insight
      {% endif %}
